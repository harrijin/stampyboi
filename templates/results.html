<html>
  <head>
    Results
  </head>
  <body>

    <br>
    <form action='/'>
      <input type='submit' value='New search'>
    </form>
    <br>
    <p id="userQuery">Searched quote: {{query}}</p>
    <br>
    <input type='text' id="quote" style="display: none;" value="{{query}}">
    <button onclick="check_spelling()">Check spelling</button>
    <br>
    <p id="didYouMean" style="color:red"></p>
    <p id="spellSuggestions"></p>
    <br>
    <p id="results">Results: {{result}}</p>
    <p id="testing"></p>
  </body>
  <script src="https://unpkg.com/json5@^2.0.0/dist/index.min.js"></script>
  <script>
    function check_spelling(){
        var userIn=encodeURIComponent(document.getElementById('quote').value);
        var suggestRequest = new XMLHttpRequest();
        var suggestions;
        suggestRequest.open('POST','/spellcheck', true);
        suggestRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        suggestRequest.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                suggestions = JSON5.parse(this.responseText);
                document.getElementById('didYouMean').innerHTML= "Did you mean:";
                document.getElementById('spellSuggestions').innerHTML=JSON.stringify(suggestions);
            }

        };
        suggestRequest.send("q="+userIn);

    }

  </script>
</html>


