{% for doc in result %}
    {% set id = doc['id'] %}
    {% set info = doc|tojson %}
    <div id="{{id}}" class="{{doc['type'] ~ ' result'}}">
        <div class="typetab" title="{{to_type_string(doc['type'])}}">
            <img src="/static/images/{{doc['type']}}.png" alt="">
        </div>
        {% if doc['type'] == 'yt' %}
            <a class="title link" href='javascript:;' onclick='directToVideo({{info}}, "0")'>{{doc['title']}}</a>
            <p class="info">{{doc['channel']}} • {{doc['date']}}</p>
            <div id="wrap-timestamps">
                <a class="thumbnail" href='javascript:;' onclick='directToVideo({{info}}, "0")'>
                    <img src="{{doc['thumb']}}" width=320 height=180 alt="thumbnail">
                </a>
                <div class="result-timestamps">
                <table id="times" cellspacing="0px" cellpadding="0px">
                    {% for tuple in doc['list'] %}
                        {% set text = tuple[0] %}
                        {% set sec = tuple[1] %}

                        <tr onclick='directToVideo({{info}}, "{{loop.index0}}")'>
                            <td>{{text}}</td>
                            <td class="timestamp">{{time_string(sec)}}</td>
                        </tr>

                    {% endfor %}
                </table>
                </div>
            </div>
        {% elif doc['type'] == 'flix'%}
        <a class="title link" href='javascript:;' onclick='directToVideo({{info}}, "0")'>{{doc['title']}} </a>
            <p class="info">Season {{doc['season']}} Episode {{doc['episode']}} • {{doc['episodeTitle']}}</p>
            <div id="wrap-timestamps">
                <a class="thumbnail" href='javascript:;' onclick='directToVideo({{info}}, "0")'>
                    <img src="https://assets.brand.microsites.netflix.io/assets/5a5c367c-8198-11e9-bf79-066b49664af6_cm_800w.png?v=32" width=320 height=180 alt="thumbnail">
                </a>
                <div class="result-timestamps">
                <table id="times" cellspacing="0px" cellpadding="0px">
                    {% for tuple in doc['list'] %}
                        {% set text = tuple[0] %}
                        {% set sec = tuple[1] %}

                        <tr onclick='directToVideo({{info}}, "{{loop.index0}}")'>
                            <td>{{text}}</td>
                            <td class="timestamp">{{time_string(sec)}}</td>
                        </tr>

                    {% endfor %}
                </table>
                </div>
            </div>

        {% else %}
            {% set extension, is_video = get_extension(id) %}
            <a class="title link" href='javascript:;' onclick='directToVideo({{info}}, "0")'>{{id}}</a>
            <p class="info">{{time_string(doc['length'])}} • {{extension.upper()}} File</p>
            <div id="wrap-timestamps">
                {% if is_video %}
                <a class="thumbnail" href='javascript:;' onclick='directToVideo({{info}}, "0")'>
                    <video src="{{ url_for('download_file', filename=id) }}#t=0,0" width="320" height="180" style="background-color: black;"></video>
                </a>
                {% else %}
                <a class="thumbnail audio-link" href='javascript:;' onclick='directToVideo({{info}}, "0")'>
                    <div class="audio"><span>{{ id[:-4] }}</span></div>
                </a>
                {% endif %}
                <div class="result-timestamps">
                <table id="times" cellspacing="0px" cellpadding="0px">
                    {% for tuple in doc['list'] %}
                        {% set text = tuple[0] %}
                        {% set sec = tuple[1] %}

                        <tr onclick='directToVideo({{info}}, "{{loop.index0}}")'>
                            <td>{{text}}</td>
                            <td class="timestamp">{{time_string(sec)}}</td>
                        </tr>

                    {% endfor %}
                </table>
                </div>
            </div>
        {% endif %}
    </div>
{% endfor %}

{% if start is not defined %}
    {% set start = 10 %}
{% endif %}

{% if count is defined and count is not none and count > start %}
    <button id="load-more" class="result" onclick='loadMore({{connectionURL|tojson}}, {{count}}, {{start}})'>
        Load More
    </button>
{% endif %}
